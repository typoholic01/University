<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Login">

<!--  로그인 -->
	<select id="login" parameterType="kh.com.model.MemberDto"
		resultType="kh.com.model.MemberDto">
		SELECT USER_ID, USER_NAME, USER_EMAIL, USER_PHONE, USER_ADDRESS, USER_AUTH, MAJOR_NUMBER, USER_STATUS, USER_BIRTH
		FROM USERS
		WHERE USER_ID=#{user_id} AND USER_PW=#{user_pw}
	</select>
	

<!-- 회원가입-->
   <insert id="addmember" parameterType="kh.com.model.MemberDto" useGeneratedKeys="false">
		INSERT INTO USERS(USER_ID, USER_PW, USER_NAME, USER_EMAIL, USER_PHONE, USER_ADDRESS, USER_AUTH, MAJOR_NUMBER, USER_STATUS, USER_BIRTH)
		VALUES(#{user_id}, #{user_pw}, #{user_name}, #{user_email}, #{user_phone}, #{user_address}, #{user_auth}, #{major_number}, #{user_status}, #{user_birth}) 
   </insert>
   
   <insert id="addmember_student" parameterType="kh.com.model.MemberDto" useGeneratedKeys="false">
		INSERT INTO STUDENT(STUDENT_ID, STUDENT_NAME, 
								STUDENT_REGIDATE, STUDENT_TERM, STUDENT_YEAR, STUDENT_TOTAL_CREDIT, STUDENT_TERM_GRADE, STUDENT_TOTAL_GRADE)
		VALUES(#{user_id}, #{user_name}, #{student_regidate}, 0,#{student_year},0,0,0 ) 
   </insert>		
   
    <insert id="addMember_prof" parameterType="kh.com.model.MemberDto" useGeneratedKeys="false">
		INSERT INTO PROFESSOR(PROF_ID, PROF_NAME, PROF_REGIDATE, PROF_POSITION, PROF_ROOM, PROF_DEGREE )
		VALUES(#{user_id}, #{user_name}, #{prof_regidate}, #{prof_position}, #{prof_room}, #{prof_degree} ) 
   </insert>	
   
    <insert id="addMember_admin" parameterType="kh.com.model.MemberDto" useGeneratedKeys="false">
		INSERT INTO ADMIN(ADMIN_ID, ADMIN_NAME, ADMIN_REGIDATE, ADMIN_DEPARTMENT, ADMIN_POSITION)
		VALUES(#{user_id}, #{user_name}, #{admin_regidate}, #{admin_department}, #{admin_position} ) 
   </insert>	


<!-- 아이디 비밀번호 찾기 -->
   <select id="findid" parameterType="kh.com.model.MemberDto" resultType="java.lang.String">
   		SELECT USER_ID
		FROM USERS
		WHERE USER_EMAIL=#{user_email} AND USER_NAME=#{user_name} AND MAJOR_NUMBER=#{major_number}
   </select>
  
   <select id="findpw" parameterType="kh.com.model.MemberDto" resultType="kh.com.model.MemberDto">
   		SELECT USER_PW, USER_EMAIL
		FROM USERS
		WHERE USER_EMAIL=#{user_email} AND USER_NAME=#{user_name} AND MAJOR_NUMBER=#{major_number} AND USER_ID=#{user_id}
   </select>
  
	
	
	

</mapper>